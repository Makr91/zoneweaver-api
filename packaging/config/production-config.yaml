version: 0.1.14
server:
  http_port: 5000
  https_port: 5001
ssl:
  enabled: true
  generate_ssl: true
  key_path: /etc/zoneweaver-api/ssl/server.key
  cert_path: /etc/zoneweaver-api/ssl/server.crt
cors:
  whitelist:
    - http://localhost:3000
    - https://localhost:3001
    - http://localhost:3001
    - https://localhost:5001
database:
  dialect: sqlite
  storage: /var/lib/zoneweaver-api/database/database.sqlite
  logging: false
api_keys:
  bootstrap_enabled: true
  bootstrap_auto_disable: true
  key_length: 64
  hash_rounds: 12
stats:
  public_access: false
zones:
  discovery_interval: 300
  auto_discovery: true
  max_concurrent_tasks: 5
  task_timeout: 300
  orphan_retention: 7
  default_pagination_limit: 50
provisioning:
  install_tools: true
cleanup:
  interval: 300
vnc:
  web_port_range_start: 8000
  web_port_range_end: 8100
  session_timeout: 1800
  cleanup_interval: 300
  bind_address: 127.0.0.1
  max_concurrent_sessions: 10
host_monitoring:
  enabled: true
  auto_enable_network_accounting: true
  network_accounting_file: /var/log/net.log
  intervals:
    network_config: 10
    network_stats: 10
    network_usage: 10
    storage: 300
    storage_frequent: 10
    device_discovery: 60
    system_metrics: 30
  retention:
    network_stats: 7
    network_usage: 30
    network_config: 90
    storage: 90
    cpu_stats: 7
    memory_stats: 7
    system_metrics: 90
    tasks: 30
  error_handling:
    max_consecutive_errors: 5
    retry_delay: 30
    reset_error_count_after: 3600
  performance:
    max_concurrent_scans: 3
    command_timeout: 30
    batch_size: 100
logging:
  level: info  # Temporarily set to info to see all logs working
  console_enabled: false  # Disable console output in production
  log_directory: /var/log/zoneweaver-api  # Configurable log directory
  file_rotation:
    max_size: 50  # MB
    max_files: 5
    compress: true
  performance_threshold_ms: 1000  # Only log operations slower than this
  categories:
    monitoring: info  # Temporarily set to info to see monitoring logs
    database: info    # Temporarily set to info to see database logs  
    tasks: info
    performance: info
    api_requests: info
    filesystem: info  # Temporarily set to info
    auth: info
    websocket: info   # Temporarily set to info
reconciliation:
  enabled: true
  interval: 3600
  log_level: warn
api_docs:
  enabled: true
fault_management:
  enabled: true
  cache_interval: 3600  # 1 hour cache for fmadm faulty results
  timeout: 30
  max_faults_displayed: 50
system_logs:
  enabled: true
  max_lines: 1000  # Default log read limit
  default_tail_lines: 100
  timeout: 30
  max_concurrent_streams: 10  # Maximum concurrent WebSocket log streams
  stream_session_timeout: 3600  # Log stream session timeout in seconds
  allowed_paths:
    - "/var/log"
    - "/var/adm"
    - "/var/fm/fmd"
  security:
    max_file_size_mb: 100  # Prevent reading huge files
    forbidden_patterns:
      - "*.pid"
      - "*.lock"
      - "*/private/*"
file_browser:
  enabled: true
  upload_size_limit_gb: 50  # Maximum file upload size
  security:
    max_file_size_mb: 51200  # 50GB for uploads
    max_edit_size_mb: 100    # 100MB for text editing
    max_directory_entries: 1000  # Prevent huge directory listings
    prevent_traversal: true
    forbidden_paths:
      - "/dev"
      - "/devices" 
      - "/system"
      - "/platform"
      - "/kernel"
      - "/proc"              # Virtual filesystem - confusing in browser
    forbidden_patterns:
      - "*/dev/*"
      - "*/devices/*"
      - "/system/*"
      - "*/platform/*"
      - "*/kernel/*"
      - "*/proc/*"
  archive:
    enabled: true
    max_archive_size_mb: 10240  # 10GB max archive size
    supported_formats: ["zip", "tar", "tar.gz", "tar.bz2", "gz"]
