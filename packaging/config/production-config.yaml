version: 0.2.0
server:
  http_port: 5000
  https_port: 5001
ssl:
  enabled: true
  generate_ssl: true
  key_path: /etc/zoneweaver-api/ssl/server.key
  cert_path: /etc/zoneweaver-api/ssl/server.crt
cors:
  whitelist:
    - http://localhost:3000
    - https://localhost:3001
    - http://localhost:3001
    - https://localhost:5001
database:
  dialect: sqlite
  storage: /var/lib/zoneweaver-api/database/database.sqlite
  logging: false
  sqlite_options:
    journal_mode: WAL
    synchronous: NORMAL
    cache_size_mb: 128
    temp_store: MEMORY
    mmap_size_mb: 512
    busy_timeout_ms: 30000
    wal_autocheckpoint: 1000
    optimize: true
    pool:
      max: 10
      min: 2
      acquire_timeout_ms: 60000
      idle_timeout_ms: 30000
      evict_interval_ms: 5000
    retry:
      max_retries: 5
      backoff_base_ms: 100
      backoff_exponent: 1.5
api_keys:
  bootstrap_enabled: true
  bootstrap_auto_disable: true
  key_length: 64
  hash_rounds: 12
stats:
  public_access: false
zones:
  discovery_interval: 300
  auto_discovery: true
  max_concurrent_tasks: 5
  task_timeout: 300
  orphan_retention: 7
  default_pagination_limit: 50
  orchestration:
    enabled: false
    take_control_on_startup: false
    return_control_on_shutdown: true
    default_strategy: parallel_by_priority
    timeouts:
      zone_shutdown: 120
      total_orchestration: 900
      priority_group_delay: 30
    priorities:
      default_priority: 95
    failure_handling:
      default_action: abort
      allow_emergency_override: true
provisioning:
  install_tools: true
cleanup:
  interval: 300
vnc:
  web_port_range_start: 8000
  web_port_range_end: 8100
  session_timeout: 1800
  cleanup_interval: 300
  bind_address: 127.0.0.1
  max_concurrent_sessions: 10
host_monitoring:
  enabled: true
  auto_enable_network_accounting: true
  network_accounting_file: /var/log/net.log
  intervals:
    network_config: 10
    network_stats: 10
    network_usage: 10
    storage: 300
    storage_frequent: 10
    device_discovery: 60
    system_metrics: 30
  retention:
    network_stats: 7
    network_usage: 30
    network_config: 90
    storage: 90
    cpu_stats: 7
    memory_stats: 7
    system_metrics: 90
    tasks: 30
  error_handling:
    max_consecutive_errors: 5
    retry_delay: 30
    reset_error_count_after: 3600
  performance:
    max_concurrent_scans: 3
    command_timeout: 30
    batch_size: 100
logging:
  level: warn
  console_enabled: false
  log_directory: /var/log/zoneweaver-api
  file_rotation:
    max_size: 50m
    max_files: 14d
    compress: true
    date_pattern: YYYY-MM-DD
  performance_threshold_ms: 1000
  categories:
    monitoring: info
    database: warn
    tasks: info
    performance: warn
    api_requests: info
    filesystem: warn
    auth: info
    websocket: warn
reconciliation:
  enabled: true
  interval: 3600
  log_level: warn
api_docs:
  enabled: true
fault_management:
  enabled: true
  cache_interval: 3600
  timeout: 30
  max_faults_displayed: 50
system_logs:
  enabled: true
  max_lines: 1000
  default_tail_lines: 100
  timeout: 30
  max_concurrent_streams: 10
  stream_session_timeout: 3600
  allowed_paths:
    - /var/log
    - /var/adm
    - /var/fm/fmd
  security:
    max_file_size_mb: 100
    forbidden_patterns:
      - '*.pid'
      - '*.lock'
      - '*/private/*'
file_browser:
  enabled: true
  upload_size_limit_gb: 50
  security:
    max_file_size_mb: 51200
    max_edit_size_mb: 100
    max_directory_entries: 1000
    prevent_traversal: true
    forbidden_paths:
      - /dev
      - /devices
      - /system
      - /platform
      - /kernel
      - /proc
    forbidden_patterns:
      - '*/dev/*'
      - '*/devices/*'
      - /system/*
      - '*/platform/*'
      - '*/kernel/*'
      - '*/proc/*'
  archive:
    enabled: true
    max_archive_size_mb: 10240
    supported_formats:
      - zip
      - tar
      - tar.gz
      - tar.bz2
      - gz
artifact_storage:
  enabled: true
  download:
    timeout_seconds: 1500
    progress_update_seconds: 10
  checksums:
    enabled: true
    algorithm: sha256
    detect_duplicates: true
    skip_duplicate_uploads: false
  scanning:
    auto_scan_after_upload: true
    auto_scan_after_download: true
    periodic_scan_interval: 300
    supported_extensions:
      iso:
        - .iso
      image:
        - .vmdk
        - .raw
        - .vdi
        - .qcow2
        - .img
        - .ova
        - .ovf
  paths:
    - name: Primary ISO Storage
      path: /data/isos
      type: iso
      enabled: true
    - name: Image Storage
      path: /data/images
      type: image
      enabled: true
  security:
    max_download_size_gb: 50
    download_timeout_minutes: 60
    max_upload_size_gb: 50
    upload_timeout_minutes: 120
    max_form_field_size_mb: 10
    max_files_per_upload: 1
    max_form_fields: 10
    upload_session_timeout_hours: 2
  cleanup:
    enabled: true
    orphaned_files_retention_days: 30
    failed_downloads_cleanup: true
